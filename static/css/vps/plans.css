/* static/css/vps/plans.css
   Selectable plan cards + sticky footer CTA bar
   Theme-aware via your --ad-* tokens.
*/

/* -----------------------------
   Plan cards
------------------------------*/
.plan-card{
  background: var(--ad-panel, #1b2132);
  border: 1px solid var(--ad-line, rgba(255,255,255,.08));
  border-radius: var(--ad-radius, 14px);
  color: var(--ad-text, #e8ecf6);
  box-shadow: var(--ad-shadow-soft, 0 3px 10px rgba(0,0,0,.20));
  padding: 1rem 1rem 1.1rem;
  cursor: pointer;
  transition: transform .08s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease, color .18s ease;
  outline: none;
}
.plan-card:hover{
  border-color: var(--ad-line-strong, rgba(255,255,255,.14));
  box-shadow: var(--ad-shadow, 0 6px 18px rgba(0,0,0,.25));
  transform: translateY(-1px);
}
.plan-card:focus{
  box-shadow: var(--ad-focus, 0 0 0 3px rgba(47,108,246,.35));
}

/* Selected state */
.plan-card.is-selected{
  background: linear-gradient(180deg, rgba(47,108,246,.18), rgba(47,108,246,.08)), var(--ad-panel-soft, #161b2a);
  border-color: color-mix(in srgb, var(--ad-accent, #2f6cf6) 55%, var(--ad-line-strong) 45%);
  box-shadow: 0 10px 28px rgba(47,108,246,.22);
}
.plan-card.is-selected .plan-title{ color:#fff; }

.plan-card .plan-head{ margin-bottom:.5rem; }
.plan-card .plan-title{
  margin:0; font-weight:800; letter-spacing:.01em; font-size:1.15rem;
  color: var(--ad-text, #e8ecf6);
}
.plan-card .specs{
  list-style:none; padding:0; margin:.6rem 0 0;
  color: var(--ad-text-dim, #b9c2da);
}
.plan-card .specs li{ margin:.28rem 0; }

/* Hide legacy per-card CTA (we trigger it programmatically) */
.plan-actions{ display:none !important; }

/* -----------------------------
   Sticky Footer CTA bar
   (Never overlaps footer thanks to JS that sets --cta-offset)
------------------------------*/
.plans-cta{
  position: sticky;
  bottom: var(--cta-offset, max(16px, env(safe-area-inset-bottom)));
  z-index: 40;

  margin-top: 16px;

  /* Parent grid with areas:
     summary | interval
     button  | button
  */
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  grid-template-areas:
    "summary interval"
    "button  button";
  gap: 12px;
  align-items: center;

  background: var(--ad-panel, #1b2132);
  border: 1px solid var(--ad-line, rgba(255,255,255,.08));
  border-radius: var(--ad-radius, 14px);
  box-shadow: var(--ad-shadow-soft, 0 6px 18px rgba(0,0,0,.22));
  padding: 12px;

  transform: translateZ(0);
}
@supports (backdrop-filter: blur(8px)){
  .plans-cta{
    background: color-mix(in srgb, var(--ad-panel, #1b2132) 78%, transparent);
    backdrop-filter: blur(8px) saturate(110%);
  }
}

/* Make the inner wrapper transparent to let its children (select+button)
   participate directly in the parent grid (no HTML change needed). */
.plans-cta-controls{
  display: contents;
}

.plans-cta-summary{
  grid-area: summary;
  display:grid; gap:4px; text-align:left;
}
.plans-cta-title{ font-weight:900; letter-spacing:.02em; }
.plans-cta-title #cta-plan-name{ font-size:1.05rem; }
.plans-cta-meta{ color: var(--ad-text-mute, #8c97b4); font-size:.95rem; }

/* Interval dropdown goes top-right */
#cta-interval{
  grid-area: interval;
  justify-self: end;
  align-self: center;
}

/* Order button gets its own full row, centered, wide */
#cta-order{
  grid-area: button;
  justify-self: center;
  width: min(720px, 100%);
}

/* -----------------------------
   Interval dropdown (clearer as a dropdown)
------------------------------*/
.plans-cta-select{
  appearance: none;
  -webkit-appearance: none;
  position: relative;
  background: rgba(255,255,255,.06);
  color: var(--ad-text, #e8ecf6);
  border: 1px solid var(--ad-line, rgba(255,255,255,.1));
  border-radius: 10px;
  padding: 10px 36px 10px 12px;   /* extra right space for chevron */
  font-weight: 800;
  cursor: pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  line-height: 1.2;
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23cbd5e1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
}
.plans-cta-select:hover{
  background: rgba(255,255,255,.12);
  border-color: var(--ad-line-strong, rgba(255,255,255,.18));
}
.plans-cta-select:focus{
  outline: none;
  box-shadow: var(--ad-focus, 0 0 0 3px rgba(47,108,246,.35));
}

/* Dropdown list colors (browser support varies) */
.plans-cta-select option{
  background: var(--ad-panel, #1b2132);
  color: var(--ad-text, #e8ecf6);
}
.plans-cta-select option:hover,
.plans-cta-select option:focus{
  background: var(--ad-accent, #2f6cf6);
  color: #fff;
}
.plans-cta-select option:checked{
  background: color-mix(in srgb, var(--ad-accent, #2f6cf6) 72%, #000 28%);
  color: #fff;
}

/* -----------------------------
   CTA button (visual)
------------------------------*/
.plans-cta-btn{
  background: linear-gradient(180deg,
              color-mix(in srgb, var(--ad-accent, #2f6cf6) 92%, #fff 8%),
              var(--ad-accent, #2f6cf6));
  color:#fff;
  border: 1px solid color-mix(in srgb, var(--ad-accent, #2f6cf6) 86%, #000 14%);
  border-radius: 12px;
  padding: 14px 22px;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 8px 20px color-mix(in srgb, var(--ad-accent, #2f6cf6) 30%, transparent);
  transition: transform .08s ease, background-color .15s ease, box-shadow .15s ease;
}
.plans-cta-btn:hover{
  background: linear-gradient(180deg,
              color-mix(in srgb, var(--ad-accent, #2f6cf6) 100%, #fff 0%),
              var(--ad-accent, #2f6cf6));
}
.plans-cta-btn:active{ transform: translateY(1px); }

/* -----------------------------
   Responsive
------------------------------*/
@media (max-width: 900px){
  /* On medium/smaller screens, stack everything:
     summary
     interval
     button
  */
  .plans-cta{
    grid-template-columns: 1fr;
    grid-template-areas:
      "summary"
      "interval"
      "button";
    gap: 10px;
  }
  #cta-interval{ justify-self: stretch; }
  #cta-order{ width: 100%; }
}

/* Visually hidden but accessible */
.sr-only{
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

/* ==============================
   Price component — two-variant design
   - Primary vs Alt look (not selected vs unselected)
   - Darker shadows on selected cards to avoid halo
   ============================== */

.plan-price{
  display:flex; gap:10px; align-items:stretch;
  margin:.55rem 0 .65rem;
  flex-wrap: wrap;
}

/* Base pill */
.price-pill{
  /* Neutral base tokens */
  --pill-fg: var(--ad-text, #e8ecf6);
  --pill-bg: rgba(255,255,255,.06);
  --pill-border: rgba(255,255,255,.12);
  --pill-shadow: 0 6px 16px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.05);

  display:inline-flex; align-items:baseline; gap:8px;
  padding: 10px 14px;
  border-radius: 999px;
  background: var(--pill-bg);
  border: 1px solid var(--pill-border);
  color: var(--pill-fg);
  letter-spacing: .01em;
  box-shadow: var(--pill-shadow);
  transition: background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease, transform .08s ease;

  flex: 1 1 240px;  /* two pills per row on wide, stack on narrow */
  min-width: 180px;
  max-width: 100%;
}

/* Typesetting inside */
.price-pill .price-amount{
  font-size: clamp(1rem, 2.1vw, 1.26rem);
  font-weight: 900; line-height: 1;
}
.price-pill .price-currency{
  font-size: .85rem; font-weight: 800; opacity: .95; text-transform: uppercase; white-space: nowrap;
}
.price-pill .price-interval{
  font-size: .85rem; font-weight: 700; opacity: .85; white-space: nowrap;
}

/* Hover hint */
.price-pill:hover{ transform: translateY(-1px); }

/* -------------------------------------------
   VARIANTS
   One interval is "primary" (filled) and the other is "alt" (outlined/striped).
   No opacity dimming — both look intentional.
   ------------------------------------------- */

/* Primary (filled) — driven by grid's show-month/show-year */
.plans-grid.show-month .price--monthly,
.plans-grid.show-year  .price--yearly{
  --pill-bg: linear-gradient(180deg,
               color-mix(in srgb, var(--ad-accent, #2f6cf6) 28%, #fff 0%),
               color-mix(in srgb, var(--ad-accent, #2f6cf6) 14%, transparent));
  --pill-border: color-mix(in srgb, var(--ad-accent, #2f6cf6) 40%, #000 60%);
  --pill-fg: #fff;
  --pill-shadow: 0 12px 26px color-mix(in srgb, var(--ad-accent, #2f6cf6) 26%, transparent),
                 inset 0 1px 0 rgba(255,255,255,.08);
}

/* Alt (outlined) — distinct treatment */
.plans-grid.show-month .price--yearly,
.plans-grid.show-year  .price--monthly{
  --pill-bg:
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  --pill-border: rgba(255,255,255,.20);
  --pill-fg: var(--ad-text, #e8ecf6);
  --pill-shadow: 0 6px 16px rgba(0,0,0,.20), inset 0 1px 0 rgba(255,255,255,.04);
  position: relative;
  overflow: hidden;
}

/* Subtle diagonal micro-stripes for the alt pill */
.plans-grid.show-month .price--yearly::after,
.plans-grid.show-year  .price--monthly::after{
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  background-image: repeating-linear-gradient(
    135deg,
    rgba(255,255,255,.06) 0px,
    rgba(255,255,255,.06) 6px,
    transparent 6px,
    transparent 12px
  );
  opacity: .22;
  border-radius: inherit;
}

/* Optional labels via pseudo-elements (disabled by default) */
.price--monthly::before,
.price--yearly::before{
  content: attr(data-label);
  display: none;
}

/* -------------------------------------------
   SELECTED CARD — darker, grounded shadows so pills sit naturally
   on the brighter selected background. Preserves "primary vs alt".
   ------------------------------------------- */
.plan-card.is-selected .price-pill{
  --pill-fg: #f3f7ff;
  /* darker, grounded shadow (no halo against bright bg) */
  --pill-shadow:
      0 10px 22px rgba(0,0,0,.36),
      inset 0 1px 0 rgba(255,255,255,.10);
  --pill-border: rgba(0,0,0,.28);
}

/* Primary pill on selected card: still bold, but with darker ambient shadow */
.plans-grid.show-month .plan-card.is-selected .price--monthly,
.plans-grid.show-year  .plan-card.is-selected .price--yearly{
  --pill-bg: linear-gradient(180deg,
               color-mix(in srgb, var(--ad-accent, #2f6cf6) 34%, #fff 0%),
               color-mix(in srgb, var(--ad-accent, #2f6cf6) 22%, transparent));
  --pill-fg: #ffffff;
  --pill-border: rgba(0,0,0,.32);
  --pill-shadow:
      0 14px 28px rgba(0,0,0,.42),
      inset 0 1px 0 rgba(255,255,255,.12);
}

/* Alt pill on selected card: outlined/striped with darker depth */
.plans-grid.show-month .plan-card.is-selected .price--yearly,
.plans-grid.show-year  .plan-card.is-selected .price--monthly{
  --pill-bg:
      linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  --pill-fg: #eef3ff;
  --pill-border: rgba(0,0,0,.24);
  --pill-shadow:
      0 10px 20px rgba(0,0,0,.34),
      inset 0 1px 0 rgba(255,255,255,.10);
}

/* Small screens: keep them readable and non-clipping */
@media (max-width: 420px){
  .price-pill{ padding:9px 12px; min-width: 150px; }
  .price-pill .price-amount{ font-size: clamp(.95rem, 4.4vw, 1.12rem); }
}
