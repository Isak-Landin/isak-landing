{% extends "layouts/base.html" %}

{% block title %}Register | Isak Landin{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/subpages.css') }}">
{% endblock %}

{% block content %}
<section class="radial-dark-section hero-condensed">
  <div class="container" style="max-width: 480px;">
    <h1>Create Account</h1>
    <div class="hero-marker"></div>

    <form method="POST" id="register-form" style="margin-top: 2rem;">
      <input type="email" name="email" placeholder="Email" required style="width: 100%; padding: 0.75rem; margin-bottom: 1.5rem;">

      <input type="password" name="password" id="password" placeholder="Password" required style="width: 100%; padding: 0.75rem; margin-bottom: 1.5rem;">

      <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required style="width: 100%; padding: 0.75rem; margin-bottom: 1.5rem;">

      <p id="password-error" style="color: #f66; font-size: 0.9rem; display: none; margin-bottom: 1.5rem;">Passwords do not match.</p>

      <button type="submit" class="button primary large" style="width: 100%;">Register</button>
    </form>

    <p style="text-align: center; margin-top: 1.5rem;">
      Already have an account? <a href="{{ url_for('auth_blueprint.login') }}">Log in here</a>
    </p>
  </div>
</section>

<script>
  const form = document.getElementById('register-form');
  const pw = document.getElementById('password');
  const confirm = document.getElementById('confirm_password');
  const errorMsg = document.getElementById('password-error');

  form.addEventListener('submit', function (e) {
    if (pw.value !== confirm.value) {
      e.preventDefault();
      errorMsg.style.display = 'block';
    } else {
      errorMsg.style.display = 'none';
    }
  });
</script>
{% endblock %}
