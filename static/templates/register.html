{% extends "layouts/public_base.html" %}

{% block page_title %}Create account — HostNodex{% endblock %}

{% block hero_title %}Create your account{% endblock %}
{% block hero_text %}Spin up VPS in minutes. Cancel anytime.{% endblock %}
{% block hero_meta %}
  <span class="trust-pill">⚡ Start fast</span>
  <span class="trust-pill">✅ No hidden fees</span>
{% endblock %}
{% block hero_actions %}{% endblock %}

{% block page_content %}
  <div class="auth-wrap">
    <div class="auth-card">
      <div class="auth-head">
        <h2>Create account</h2>
        <p>It only takes a minute.</p>
      </div>

      <form method="POST" id="register-form" class="auth-form" novalidate>
        {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

        <div class="form-row">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required autofocus>
        </div>

        <div class="form-row">
          <label for="password">Password</label>
          <input id="password" name="password" type="password" placeholder="Create a password" required minlength="8">
        </div>

        <div class="form-row">
          <label for="confirm_password">Confirm password</label>
          <input id="confirm_password" name="confirm_password" type="password" placeholder="Repeat your password" required minlength="8">
        </div>

        <div class="form-row" style="margin-top:.75rem;">
          <label class="checkbox">
            <input id="accept_legal" name="accept_legal" type="checkbox" required>
            <span>
              I agree to the
              <a class="policy-link-text" href="{{ url_for('legal_blueprint.legal_detail', slug='terms') }}" target="_blank" rel="noopener">Terms of Service</a>,
              <a class="policy-link-text" href="{{ url_for('legal_blueprint.legal_detail', slug='privacy') }}" target="_blank" rel="noopener">Privacy Policy</a>,
              and <a class="policy-link-text" href="{{ url_for('legal_blueprint.legal_detail', slug='aup') }}" target="_blank" rel="noopener">Acceptable Use Policy</a>.
            </span>
          </label>
        </div>

        <div id="password-error" class="auth-error" style="display:none;"></div>
        <div id="register-error" class="auth-error" style="display:none;"></div>

        <div class="auth-actions">
          <button id="register-submit" type="submit" class="button primary auth-primary">Create account</button>
          <a class="button ghost auth-secondary" href="{{ url_for('auth_blueprint.login') }}">Have an account?</a>
        </div>

        <div class="auth-meta">
          <a href="{{ url_for('vps_blueprint.vps_list_page') }}">Browse VPS plans</a>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block extra_css %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/public.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}?v=2">
{% endblock %}

{% block extra_js %}
  {{ super() }}
  <script>
    const form = document.getElementById('register-form');
    const pw = document.getElementById('password');
    const confirmPw = document.getElementById('confirm_password');
    const pwError = document.getElementById('password-error');
    form.addEventListener('submit', function (e) {
      if (pw.value !== confirmPw.value) {
        e.preventDefault();
        pwError.textContent = "Passwords don’t match.";
        pwError.style.display = 'block';
      } else {
        pwError.style.display = 'none';
      }
    });
  </script>
  <script src="{{ url_for('static', filename='js/register.js') }}?v=2"></script>
{% endblock %}
