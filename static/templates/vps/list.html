{% extends "layouts/dashboard_base.html" %}
{% block title %}VPS Plans{% endblock %}

{% block extra_css %}{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_vps.css') }}">
{% endblock %}

{% block dashboard_content %}
<section class="radial-dark-section hero-condensed">
  <div class="container">
    <h1 class="hero-condensed-title">Choose your VPS</h1>
    <p class="intro-lead hero-condensed-text">Simple pricing. Scale later.</p>
  </div>
</section>

<section class="split-section">
  <div class="container">
    <div class="plans-grid">
      {% for p in plans %}
      <article class="plan-card">
        <header class="plan-head">
          <h3 class="plan-title">{{ p.name }}</h3>
          {# description removed on purpose #}
        </header>

        <ul class="specs">
          <li><strong>{{ p.vcpu }}</strong> vCPU</li>
          <li><strong>{{ p.ram_gb }}</strong> GB RAM</li>
          <li><strong>{{ p.ssd_gb }}</strong> GB NVMe</li>
          <li><strong>{{ p.bandwidth_tb }}</strong> TB bandwidth</li>
          <li><strong>OS</strong> of choice</li>
        </ul>

        {% if current_user.is_authenticated %}
          <div class="plan-actions">
            <button class="plan-btn plan-btn--ghost"
                    data-plan="{{ p.plan_code }}" data-interval="month">
              Get
            </button>
          </div>
        {% else %}
          <a class="plan-btn plan-btn--ghost"
             href="{{ url_for('auth_blueprint.login') }}?next={{ url_for('vps_blueprint.vps_list_page') }}">
            Log in to get
          </a>
        {% endif %}
      </article>
      {% endfor %}
    </div>
  </div>
</section>

{% if current_user.is_authenticated %}
  <script>
    // For now default interval = month. We can add a chooser later.
    window.VPS_CHECKOUT_URL = "{{ url_for('vps_blueprint.vps_checkout') }}";
  </script>
  <script src="{{ url_for('static', filename='js/vps/list.js') }}"></script>
{% endif %}
{% endblock %}
