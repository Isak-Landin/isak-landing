{% extends "layouts/dashboard_content_base.html" %}
{% block title %}Payment Successful{% endblock %}

{% block page_title %}Payment successful{% endblock %}
{% block hero_title %}You're all set! ðŸŽ‰{% endblock %}
{% block hero_actions %}{% endblock %}

{% block extra_css %}{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/vps/checkout_status.css') }}?v=1">
{% endblock %}

{% block page_content %}
<section class="status-wrap">
  <div class="status-card" role="status" aria-live="polite">
    <header class="status-header">
      <div class="status-icon success" aria-hidden="true">âœ…</div>
      <div>
        <h2 class="status-title">Payment successful</h2>
        <p class="status-subtitle">Your subscription has been created. Weâ€™re preparing your VPS.</p>
        <div class="badges">
          <span class="badge">Secure checkout</span>
          <span class="badge">No hidden fees</span>
          <span class="badge">Cancel anytime</span>
        </div>
      </div>
    </header>

    <div class="status-body">
      <p>Youâ€™ll see your VPS in the dashboard shortly. Weâ€™ll also email a receipt and any next steps.</p>

      <div class="status-kv">
        {% if invoice_id %}<div class="k">Invoice</div><div class="v"><code>{{ invoice_id }}</code></div>{% endif %}
        {% if session_id %}<div class="k">Session</div><div class="v"><code id="ref-val">{{ session_id }}</code> <a href="#" id="copy-ref" class="badge" title="Copy reference">Copy</a></div>{% endif %}
      </div>

      <div class="status-actions">
        <a href="{{ url_for('users_blueprint.dashboard') }}" class="btn btn-primary">Go to dashboard</a>
        <a href="{{ url_for('vps_blueprint.vps_list_page') }}" class="btn btn-ghost">Back to plans</a>
      </div>
    </div>
  </div>
</section>

<script>
  (function () {
    const btn = document.getElementById('copy-ref');
    const val = document.getElementById('ref-val');
    if (!btn || !val) return;
    btn.addEventListener('click', function (e) {
      e.preventDefault();
      const text = val.textContent.trim();
      if (!text) return;
      navigator.clipboard?.writeText(text).then(() => {
        btn.textContent = 'Copied';
        setTimeout(() => btn.textContent = 'Copy', 1400);
      });
    });
  })();
</script>
{% endblock %}
